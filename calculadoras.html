<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadoras el√©ctricas - Movilidad El√©ctrica 24</title>
  <meta name="description" content="Calcula el coste por viaje, tiempo y coste de recarga, autonom√≠a real y coste por kil√≥metro para tu veh√≠culo el√©ctrico.">
  <link rel="canonical" href="/calculadoras.html">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script>
    tailwind.config = { theme: { extend: { fontFamily: { inter: ['Inter','sans-serif'] }, colors: { 'verde-principal':'#10B981','gris-oscuro':'#1F2937','gris-claro':'#F9FAFB', 'verde-suave':'#ECFDF5' }, boxShadow: { 'elevated':'0 10px 25px -5px rgba(0,0,0,.1), 0 8px 10px -6px rgba(0,0,0,.1)' } } } }
  </script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .card { transition: transform .15s ease, box-shadow .15s ease }
    .card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px -5px rgba(0,0,0,.1), 0 8px 10px -6px rgba(0,0,0,.1) }
    /* Sustituimos @apply por CSS equivalente para compatibilidad con Tailwind CDN */
    .calc-label { display:block; font-size:0.875rem; font-weight:500; color:#374151; margin-bottom:0.25rem; }
    .calc-input { width:100%; padding:0.75rem 1rem; border:1px solid #E5E7EB; border-radius:0.5rem; outline: none; background:#fff; transition: box-shadow .15s ease, border-color .15s ease; }
    .calc-input:focus { box-shadow: 0 0 0 2px rgba(16,185,129,.35); border-color: transparent; }
  </style>
</head>
<body class="bg-gradient-to-b from-white to-gris-claro min-h-screen text-gris-oscuro">
  <!-- Header -->
  <header class="bg-white/90 backdrop-blur sticky top-0 z-50 shadow">
    <div class="max-w-6xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <div class="bg-verde-principal text-white rounded-lg p-2">
            <i class="fas fa-charging-station text-2xl"></i>
          </div>
          <div>
            <h1 class="text-2xl md:text-3xl font-bold text-gris-oscuro">Movilidad El√©ctrica 24</h1>
            <p class="text-sm text-gray-600">Noticias sobre el futuro de la movilidad</p>
          </div>
        </div>
        <button id="mobile-menu-btn" class="md:hidden bg-verde-principal text-white p-2 rounded-lg">
          <i class="fas fa-bars"></i>
        </button>
      </div>
      <nav class="mt-4">
        <ul id="nav-menu" class="hidden md:flex space-x-6 text-gris-oscuro font-medium">
          <li><a href="/index.html#news-section" class="hover:text-verde-principal transition-colors duration-200">Noticias</a></li>
          <li><a href="#" class="hover:text-verde-principal transition-colors duration-200">Comparativas</a></li>
          <li><a href="#" class="hover:text-verde-principal transition-colors duration-200">Reviews</a></li>
          <li>
            <a href="/calculadoras.html" class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-verde-suave text-emerald-700 border border-emerald-200">
              <i class="fas fa-calculator"></i><span>Calculadoras</span>
            </a>
          </li>
          <li><a href="/sobre.html" class="hover:text-verde-principal transition-colors duration-200">Sobre m√≠</a></li>
          <li><a href="/contacto.html" class="hover:text-verde-principal transition-colors duration-200">Contacto</a></li>
        </ul>
        <ul id="mobile-nav" class="md:hidden hidden flex-col space-y-3 mt-4 bg-gray-50 p-4 rounded-lg">
          <li><a href="/index.html#news-section" class="block text-gris-oscuro hover:text-verde-principal font-medium">Noticias</a></li>
          <li><a href="#" class="block text-gris-oscuro hover:text-verde-principal font-medium">Comparativas</a></li>
          <li><a href="#" class="block text-gris-oscuro hover:text-verde-principal font-medium">Reviews</a></li>
          <li><a href="/calculadoras.html" class="block text-gris-oscuro hover:text-verde-principal font-medium">Calculadoras el√©ctricas</a></li>
          <li><a href="/sobre.html" class="block text-gris-oscuro hover:text-verde-principal font-medium">Sobre m√≠</a></li>
          <li><a href="/contacto.html" class="block text-gris-oscuro hover:text-verde-principal font-medium">Contacto</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-10">
    <nav class="text-sm text-gray-600 mb-6" aria-label="breadcrumb">
      <ol class="list-reset flex"><li><a class="hover:text-verde-principal" href="/index.html">Inicio</a></li><li class="mx-2">/</li><li class="text-gray-500">Calculadoras el√©ctricas</li></ol>
    </nav>

    <section class="bg-white/90 rounded-2xl shadow-elevated p-6 md:p-10 border border-gray-100">
      <header class="mb-8">
        <div class="flex items-start justify-between flex-wrap gap-4">
          <div>
            <div class="inline-flex items-center gap-2 text-emerald-700 bg-verde-suave border border-emerald-200 px-3 py-1 rounded-full text-sm font-medium">
              <i class="fas fa-bolt"></i> Herramientas EV
            </div>
            <h1 class="text-3xl md:text-4xl font-extrabold mt-3">Calculadoras el√©ctricas</h1>
            <p class="text-gray-600 mt-2">Herramientas r√°pidas para el d√≠a a d√≠a: costes, tiempos y autonom√≠a.</p>
          </div>
        </div>
        <div class="prose prose-emerald max-w-none mt-6 text-gray-700">
          <p>Hola, soy Jos√©. Si est√°s aqu√≠ es porque, como a m√≠, te gusta saber exactamente cu√°nto te va a costar cargar el coche o cu√°nto tardar√° en cargar la bater√≠a. ¬°Bienvenido a tu rinc√≥n de c√°lculos! (S√≠, el mismo que uso yo cada dos por tres).</p>
          
          <p class="mt-4"></p>
          
          <p>Estas calculadoras nacieron de mi propia necesidad. La primera vez que me qued√© a dos calles de casa con un 2% de bater√≠a (s√≠, un vecino tuvo que sacar un alargador por la ventana para rescatarme), decid√≠ que esto de los c√°lculos el√©ctricos ten√≠a que ser m√°s f√°cil. Y aqu√≠ est√°n, las mismas herramientas que uso yo, ahora a tu disposici√≥n. 100% gratuitas, palabra de electricista aficionado.</p>
          
          <h3 class="text-xl font-semibold text-gris-oscuro mt-8 mb-6">¬øQu√© puedes hacer aqu√≠?</h3>
          
          <h4 class="font-semibold text-emerald-700 mt-5 mb-2">1. Coste por viaje</h4>
          <p>La que m√°s uso cuando mi cu√±ado empieza con el rollo de que su di√©sel es m√°s barato. Introduce distancia, consumo y precio de la luz, y ver√°s c√≥mo se le queda la cara cuando le dices cu√°nto te cuesta ir a M√°laga y volver. Spoiler: menos que su cafelito de media ma√±ana.</p>
          
          <h4 class="font-semibold text-emerald-700 mt-5 mb-2">2. Tiempo de recarga</h4>
          <p>¬øLlegas a casa con la bater√≠a m√°s baja que la moral un lunes por la ma√±ana? Con esta calculadora sabr√°s si da tiempo a cargar para salir al cine o si toca pedir pizza y esperar. A m√≠ me ha salvado de m√°s de un plan frustrado (y de alguna que otra discusi√≥n, todo sea dicho).</p>
          
          <h4 class="font-semibold text-emerald-700 mt-5 mb-2">3. Autonom√≠a real</h4>
          <p>Porque eso de "hasta 400 km" en el cat√°logo es como lo de "talla √∫nica" en las camisetas: bonito sobre el papel. Aqu√≠ ver√°s cu√°ntos kil√≥metros te va a marcar el cuentakil√≥metros de verdad, teniendo en cuenta si vas con la calefacci√≥n puesta, la m√∫sica a todo volumen y el maletero lleno de trastos (que todos lo tenemos as√≠).</p>
          
          <h4 class="font-semibold text-emerald-700 mt-5 mb-2">4. Ahorro vs. gasolina</h4>
          <p>Para los que a√∫n piensan que la gasolina es m√°s barata. Introduce tus datos y descubre cu√°nto te ahorrar√≠as al a√±o. Luego me cuentas qu√© haces con ese dinero extra (un consejo: inv√≠tame a un caf√©, que las calculadoras no se programan solas).</p>
          
          <h4 class="font-semibold text-emerald-700 mt-5 mb-2">5. Coste por kil√≥metro</h4>
          <p>Mi favorita para callar bocas. Cuando alguien dice que los el√©ctricos son caros, saco esta calculadora. Ver√°s c√≥mo se les queda la cara cuando les dices que te cuesta menos de 2‚Ç¨ ir y volver del trabajo. Y eso sin contar que no pagas impuestos de circulaci√≥n ni entras en las restricciones de tr√°fico. Toma ya.</p>
          
          <div class="bg-amber-50 p-4 rounded-lg mt-8 border border-amber-100">
            <p class="text-amber-800 text-sm">
              <span class="font-bold block mb-1">üí° Un truco de electricista novato (que ya no lo es tanto):</span>
              No te comas la cabeza con los decimales. La primera vez que us√© estas calculadoras me volv√≠ loco con los decimales. Al final, lo importante es que te hagas una idea aproximada. Si el c√°lculo te dice que tardar√°s 4 horas y 23 minutos en cargar, redondea a 4 horas y media y √©chale un caf√© por si acaso. Y si te atascas, ya sabes, escr√≠beme a <a href="mailto:contacto@movilidadelectrica24.com" class="text-emerald-600 hover:underline">contacto@movilidadelectrica24.com</a>. Entre electricistas nos tenemos que ayudar, ¬øno?
            </p>
          </div>
        </div>
      </header>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8">
        <!-- 1. Coste por viaje -->
        <div class="card bg-white border border-gray-100 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold text-gris-oscuro flex items-center gap-2"><span class="inline-flex items-center justify-center w-8 h-8 rounded-lg bg-verde-suave text-emerald-700"><i class="fas fa-road"></i></span> Coste por viaje</h2>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="calc-label" for="viaje-km">Kil√≥metros</label>
              <input id="viaje-km" type="number" min="0" step="0.1" class="calc-input" placeholder="ej. 120">
            </div>
            <div>
              <label class="calc-label" for="viaje-consumo-ev">Consumo EV (kWh/100km)</label>
              <input id="viaje-consumo-ev" type="number" min="0" step="0.1" class="calc-input" placeholder="ej. 16">
            </div>
            <div>
              <label class="calc-label" for="viaje-precio-kwh">Precio kWh (‚Ç¨)</label>
              <input id="viaje-precio-kwh" type="number" min="0" step="0.001" class="calc-input" placeholder="ej. 0.18">
            </div>
            <div>
              <label class="calc-label" for="viaje-precio-comb">Precio combustible (‚Ç¨/L)</label>
              <input id="viaje-precio-comb" type="number" min="0" step="0.001" class="calc-input" placeholder="ej. 1.70">
            </div>
            <div>
              <label class="calc-label" for="viaje-consumo-comb">Consumo combustible (L/100km)</label>
              <input id="viaje-consumo-comb" type="number" min="0" step="0.1" class="calc-input" placeholder="ej. 6.5">
            </div>
          </div>
          <div class="mt-4 flex items-center gap-3">
            <button id="btn-calcular-viaje" class="bg-verde-principal hover:bg-emerald-600 text-white px-5 py-2 rounded-lg shadow-sm">Calcular</button>
            <button id="btn-reset-viaje" class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-lg">Borrar</button>
            <span id="viaje-resultado" class="text-gris-oscuro font-medium"></span>
          </div>
          <p id="viaje-detalle" class="text-sm text-gray-600 mt-2"></p>
        </div>

        <!-- 2. Tiempo de recarga -->
        <div class="card bg-emerald-50 border border-emerald-100 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold text-gris-oscuro flex items-center gap-2"><span class="inline-flex items-center justify-center w-8 h-8 rounded-lg bg-verde-suave text-emerald-700"><i class="fas fa-clock"></i></span> Tiempo de recarga</h2>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="calc-label" for="tiempo-capacidad">Capacidad bater√≠a (kWh)</label>
              <input id="tiempo-capacidad" type="number" min="0" step="0.1" class="calc-input" placeholder="ej. 64">
            </div>
            <div>
              <label class="calc-label" for="tiempo-actual">% actual</label>
              <input id="tiempo-actual" type="number" min="0" max="100" step="1" class="calc-input" placeholder="ej. 20">
            </div>
            <div>
              <label class="calc-label" for="tiempo-deseado">% deseado</label>
              <input id="tiempo-deseado" type="number" min="0" max="100" step="1" class="calc-input" placeholder="ej. 80">
            </div>
            <div>
              <label class="calc-label" for="tiempo-potencia">Potencia de carga (kW)</label>
              <input id="tiempo-potencia" type="number" min="0" step="0.1" class="calc-input" placeholder="ej. 11">
            </div>
          </div>
          <div class="mt-4 flex items-center gap-3">
            <button id="btn-calcular-tiempo" class="bg-verde-principal hover:bg-emerald-600 text-white px-5 py-2 rounded-lg shadow-sm">Calcular</button>
            <button id="btn-reset-tiempo" class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-lg">Borrar</button>
            <span id="tiempo-resultado" class="text-gris-oscuro font-medium"></span>
          </div>
          <p id="tiempo-detalle" class="text-sm text-gray-600 mt-2"></p>
        </div>

        <!-- 3. Coste de recarga -->
        <div class="card bg-white border border-gray-100 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold text-gris-oscuro flex items-center gap-2"><span class="inline-flex items-center justify-center w-8 h-8 rounded-lg bg-verde-suave text-emerald-700"><i class="fas fa-euro-sign"></i></span> Coste de recarga</h2>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="calc-label" for="coste-kwh">kWh a cargar</label>
              <input id="coste-kwh" type="number" min="0" step="0.1" class="calc-input" placeholder="ej. 30">
            </div>
            <div>
              <label class="calc-label" for="coste-precio-kwh">Precio kWh (‚Ç¨)</label>
              <input id="coste-precio-kwh" type="number" min="0" step="0.001" class="calc-input" placeholder="ej. 0.18">
            </div>
          </div>
          <div class="mt-4 flex items-center gap-3">
            <button id="btn-calcular-coste" class="bg-verde-principal hover:bg-emerald-600 text-white px-5 py-2 rounded-lg shadow-sm">Calcular</button>
            <button id="btn-reset-coste" class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-lg">Borrar</button>
            <span id="coste-resultado" class="text-gris-oscuro font-medium"></span>
          </div>
        </div>

        <!-- 4. Autonom√≠a real -->
        <div class="card bg-emerald-50 border border-emerald-100 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold text-gris-oscuro flex items-center gap-2"><span class="inline-flex items-center justify-center w-8 h-8 rounded-lg bg-verde-suave text-emerald-700"><i class="fas fa-route"></i></span> Autonom√≠a real</h2>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="calc-label" for="auto-capacidad">Capacidad bater√≠a (kWh)</label>
              <input id="auto-capacidad" type="number" min="0" step="0.1" class="calc-input" placeholder="ej. 60">
            </div>
            <div>
              <label class="calc-label" for="auto-consumo">Consumo medio (kWh/100km)</label>
              <input id="auto-consumo" type="number" min="0" step="0.1" class="calc-input" placeholder="ej. 16">
            </div>
            <div>
              <label class="calc-label" for="auto-cond">Condiciones de conducci√≥n</label>
              <select id="auto-cond" class="calc-input">
                <option value="urbana">Urbana</option>
                <option value="mixta" selected>Mixta</option>
                <option value="autopista">Autopista</option>
              </select>
            </div>
            <div>
              <label class="calc-label" for="auto-temp">Temperatura (¬∞C)</label>
              <input id="auto-temp" type="number" step="1" class="calc-input" placeholder="ej. 20">
            </div>
          </div>
          <div class="mt-4 flex items-center gap-3">
            <button id="btn-calcular-auto" class="bg-verde-principal hover:bg-emerald-600 text-white px-5 py-2 rounded-lg shadow-sm">Calcular</button>
            <button id="btn-reset-auto" class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-lg">Borrar</button>
            <span id="auto-resultado" class="text-gris-oscuro font-medium"></span>
          </div>
          <p id="auto-detalle" class="text-sm text-gray-600 mt-2"></p>
        </div>

        <!-- 5. Coste por kil√≥metro -->
        <div class="card bg-white border border-gray-100 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-bold text-gris-oscuro flex items-center gap-2"><span class="inline-flex items-center justify-center w-8 h-8 rounded-lg bg-verde-suave text-emerald-700"><i class="fas fa-ruler-horizontal"></i></span> Coste por kil√≥metro</h2>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="calc-label" for="k-cm-consumo">Consumo medio (kWh/100km)</label>
              <input id="k-cm-consumo" type="number" min="0" step="0.1" class="calc-input" placeholder="ej. 16">
            </div>
            <div>
              <label class="calc-label" for="k-cm-precio">Precio kWh (‚Ç¨)</label>
              <input id="k-cm-precio" type="number" min="0" step="0.001" class="calc-input" placeholder="ej. 0.18">
            </div>
          </div>
          <div class="mt-4 flex items-center gap-3">
            <button id="btn-calcular-km" class="bg-verde-principal hover:bg-emerald-600 text-white px-5 py-2 rounded-lg shadow-sm">Calcular</button>
            <button id="btn-reset-km" class="bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-lg">Borrar</button>
            <span id="km-resultado" class="text-gris-oscuro font-medium"></span>
          </div>
        </div>
      </div>

      <div class="mt-16 bg-gray-50 rounded-2xl p-8 md:p-10 border border-gray-100">
        <h2 class="text-2xl font-bold text-gris-oscuro mb-6">Ventajas de usar un coche el√©ctrico</h2>
        <div class="grid md:grid-cols-2 gap-8">
          <div>
            <h3 class="font-semibold text-lg text-emerald-700 mb-3">Ahorro econ√≥mico</h3>
            <p class="text-gray-700">Los veh√≠culos el√©ctricos tienen un <strong>coste por kil√≥metro significativamente menor</strong> que los de combusti√≥n. Con precios de la electricidad m√°s estables que los combustibles f√≥siles, tu ahorro a largo plazo puede ser considerable.</p>
          </div>
          <div>
            <h3 class="font-semibold text-lg text-emerald-700 mb-3">Mantenimiento reducido</h3>
            <p class="text-gray-700">Al no tener motor de combusti√≥n, los coches el√©ctricos requieren menos mantenimiento. Olv√≠date de cambios de aceite, correas de distribuci√≥n o problemas con el sistema de escape.</p>
          </div>
        </div>
        <div class="mt-8 bg-white p-6 rounded-xl border border-emerald-100">
          <h3 class="font-semibold text-lg text-emerald-700 mb-3">¬øSab√≠as que...?</h3>
          <p class="text-gray-700">Un veh√≠culo el√©ctrico puede ahorrarte hasta un <strong>70% en costes de combustible</strong> en comparaci√≥n con un coche de gasolina equivalente. Adem√°s, en muchas ciudades disfrutan de ventajas como acceso a zonas de bajas emisiones, aparcamiento gratuito en zonas reguladas y descuentos en peajes.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-gris-oscuro text-white py-12 mt-16">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <div class="flex items-center space-x-3 mb-4">
            <div class="bg-verde-principal text-white rounded-lg p-2"><i class="fas fa-charging-station text-xl"></i></div>
            <h3 class="text-xl font-bold">Movilidad El√©ctrica 24</h3>
          </div>
          <p class="text-gray-300">Tu fuente confiable de noticias sobre movilidad el√©ctrica.</p>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-4">Enlaces √ötiles</h4>
          <ul class="space-y-2">
            <li><a href="/privacidad.html" class="text-gray-300 hover:text-verde-principal transition-colors">Pol√≠tica de Privacidad</a></li>
            <li><a href="/terminos.html" class="text-gray-300 hover:text-verde-principal transition-colors">T√©rminos de Uso</a></li>
            <li><a href="/contacto.html" class="text-gray-300 hover:text-verde-principal transition-colors">Contacto</a></li>
            <li><a href="/index.html" class="text-gray-300 hover:text-verde-principal transition-colors">Volver al Inicio</a></li>
          </ul>
        </div>
      </div>
      <div class="border-t border-gray-700 mt-8 pt-8 text-center"><p class="text-gray-400">¬© 2025 Movilidad El√©ctrica 24</p></div>
    </div>
  </footer>

  <script>
    // Utilidades
    const fmtEur = (n) => new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' }).format(n);
    const fmtNum = (n, d=2) => (isFinite(n) ? Number(n).toFixed(d) : '-');
    const val = (id) => parseFloat(document.getElementById(id).value);

    const show = (id, txt) => { document.getElementById(id).textContent = txt; };
    // Reset helpers
    const clear = (id) => { const el = document.getElementById(id); if (el) el.value = ''; };
    const clearText = (id) => { const el = document.getElementById(id); if (el) el.textContent = ''; };
    const resetSelect = (id) => {
      const el = document.getElementById(id);
      if (!el) return;
      const def = Array.from(el.options).find(o => o.defaultSelected) || el.options[0];
      el.value = def ? def.value : '';
    };

    // 1. Coste por viaje
    document.getElementById('btn-calcular-viaje').addEventListener('click', () => {
      const km = val('viaje-km');
      const evCons = val('viaje-consumo-ev'); // kWh/100km
      const pkwh = val('viaje-precio-kwh');
      const pcomb = val('viaje-precio-comb'); // ‚Ç¨/L
      const ccomb = val('viaje-consumo-comb'); // L/100km

      if ([km, evCons, pkwh].some(isNaN)) { show('viaje-resultado', 'Completa los campos b√°sicos'); return; }

      const evEnergy = (evCons/100) * km; // kWh
      const evCost = evEnergy * pkwh;

      let iceCost = null;
      if (!isNaN(pcomb) && !isNaN(ccomb)) {
        const liters = (ccomb/100) * km;
        iceCost = liters * pcomb;
      }

      let resumen = `Coste EV: ${fmtEur(evCost)}`;
      if (iceCost !== null) {
        const diff = iceCost - evCost;
        resumen += ` | Combusti√≥n: ${fmtEur(iceCost)} (${diff >= 0 ? 'ahorro EV' : 'extra EV'}: ${fmtEur(Math.abs(diff))})`;
        show('viaje-detalle', `Energ√≠a usada: ${fmtNum(evEnergy)} kWh ¬∑ Litros estimados: ${isFinite(iceCost) ? fmtNum((ccomb/100)*km) : '-'} L`);
      } else {
        show('viaje-detalle', `Energ√≠a usada: ${fmtNum(evEnergy)} kWh`);
      }
      show('viaje-resultado', resumen);
    });
    document.getElementById('btn-reset-viaje').addEventListener('click', () => {
      ['viaje-km','viaje-consumo-ev','viaje-precio-kwh','viaje-precio-comb','viaje-consumo-comb'].forEach(clear);
      clearText('viaje-resultado');
      clearText('viaje-detalle');
    });

    // 2. Tiempo de recarga
    document.getElementById('btn-calcular-tiempo').addEventListener('click', () => {
      const cap = val('tiempo-capacidad'); // kWh
      const pctA = val('tiempo-actual');
      const pctD = val('tiempo-deseado');
      const pwr = val('tiempo-potencia'); // kW
      if ([cap, pctA, pctD, pwr].some(isNaN) || pctD < pctA) { show('tiempo-resultado', 'Revisa los datos'); return; }
      const kwh = cap * (pctD - pctA) / 100; // kWh a cargar
      const horas = kwh / (pwr || 1);
      const hh = Math.floor(horas);
      const mm = Math.round((horas - hh)*60);
      show('tiempo-resultado', `Tiempo estimado: ${hh} h ${mm} min`);
      show('tiempo-detalle', `Energ√≠a a cargar: ${fmtNum(kwh)} kWh`);
    });
    document.getElementById('btn-reset-tiempo').addEventListener('click', () => {
      ['tiempo-capacidad','tiempo-actual','tiempo-deseado','tiempo-potencia'].forEach(clear);
      clearText('tiempo-resultado');
      clearText('tiempo-detalle');
    });

    // 3. Coste de recarga
    document.getElementById('btn-calcular-coste').addEventListener('click', () => {
      const kwh = val('coste-kwh');
      const pkwh = val('coste-precio-kwh');
      if ([kwh, pkwh].some(isNaN)) { show('coste-resultado', 'Revisa los datos'); return; }
      const coste = kwh * pkwh;
      show('coste-resultado', `Coste estimado: ${fmtEur(coste)}`);
    });
    document.getElementById('btn-reset-coste').addEventListener('click', () => {
      ['coste-kwh','coste-precio-kwh'].forEach(clear);
      clearText('coste-resultado');
    });

    // 4. Autonom√≠a real
    document.getElementById('btn-calcular-auto').addEventListener('click', () => {
      const cap = val('auto-capacidad');
      let cons = val('auto-consumo'); // kWh/100km base
      const cond = document.getElementById('auto-cond').value;
      const temp = val('auto-temp');
      if ([cap, cons].some(isNaN)) { show('auto-resultado', 'Revisa los datos'); return; }
      // Ajustes simples
      const condFactor = cond === 'urbana' ? 0.95 : (cond === 'mixta' ? 1.00 : 1.15); // autopista penaliza
      let tempFactor = 1.0;
      if (!isNaN(temp)) {
        if (temp < 0) tempFactor = 1.25; // mucho fr√≠o
        else if (temp < 10) tempFactor = 1.12; // fr√≠o moderado
        else if (temp > 35) tempFactor = 1.10; // calor fuerte
      }
      const consAdj = cons * condFactor * tempFactor;
      const autonomia = (cap / consAdj) * 100; // km
      show('auto-resultado', `Autonom√≠a estimada: ${fmtNum(autonomia, 0)} km`);
      show('auto-detalle', `Consumo ajustado: ${fmtNum(consAdj)} kWh/100 km (condiciones: ${cond}, temperatura: ${isNaN(temp)?'N/A':temp+'¬∞C'})`);
    });
    document.getElementById('btn-reset-auto').addEventListener('click', () => {
      ['auto-capacidad','auto-consumo','auto-temp'].forEach(clear);
      resetSelect('auto-cond');
      clearText('auto-resultado');
      clearText('auto-detalle');
    });

    // 5. Coste por kil√≥metro
    document.getElementById('btn-calcular-km').addEventListener('click', () => {
      const cons = val('k-cm-consumo');
      const pkwh = val('k-cm-precio');
      if ([cons, pkwh].some(isNaN)) { show('km-resultado', 'Revisa los datos'); return; }
      const costeKm = (cons/100) * pkwh;
      show('km-resultado', `Coste por km: ${fmtEur(costeKm)}`);
    });
    document.getElementById('btn-reset-km').addEventListener('click', () => {
      ['k-cm-consumo','k-cm-precio'].forEach(clear);
      clearText('km-resultado');
    });
  </script>
  <script src="/js/main.js?v=2"></script>
</body>
</html>
